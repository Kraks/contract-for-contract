\begin{figure}
  \newcommand{\F}{\mathcal{F}}
  \begin{alignat*}{3}
    &~ n && \in && \mathbb{Z} \qquad b \in \mathbb{B} \qquad x,y,f \in \Typ{Id}   \\
    \Typ{Types} &~ t && :=\ && \Keywd{int} \mid \Keywd{uint} \mid \Keywd{bool} \mid \Keywd{address} \\
                &~   && \mid\ && \Keywd{mapping} ~t~ \Keywd{=>} ~t \mid \Keywd{struct} ~x~ \Keywd{\{}~ d^* ~\Keywd{\}} \\
    \Typ{TypeDecl}    &~ d && :=\ && t ~ x \\
    \Typ{Values}      &~ v && :=\ && n \mid b \\
    \Typ{Projection}  &~ p && :=\ && \Keywd{.}x \mid \Keywd{[}e\Keywd{]} \\
    \Typ{Expressions} &~ e && :=\ && x \mid v \mid e ~op~ e \mid e p^+ \\
                      &~   && \mid\ && e.f\Keywd{\{}(x: e)^*\Keywd{\}(}e^*\Keywd{)}
                              \mid   f\Keywd{(}e^*\Keywd{)}\\
    \Typ{Assignable}  &~ a && :=\ && d \mid x \mid e p^+ \\
    \Typ{Statements}  &~ s && :=\ && d \mid e \mid s; s \mid a ~\Keywd{=}~ e \mid \Keywd{return}~ e \mid \Keywd{revert} \\
    \Typ{Spec}        &~ \sigma && :=\ && f\Keywd{\{}(x : y)^*\Keywd{\}(}x^*\Keywd{)} ~\Keywd{returns (}y^*\Keywd{)} \\
                      &~        &&     && \Keywd{requires}~ e ~\Keywd{ensures}~ e ~\Keywd{where}~ \sigma^* \\
    \Typ{Modifiers}   &~ m && :=\ && \Keywd{public} \mid \Keywd{private} \\
    \Typ{FunDef}      &~ \F&& :=\ && \sigma ~\Keywd{function}~ f\Keywd{(}d^*\Keywd{)} ~ m ~\Keywd{returns (}t^*\Keywd{)} ~\Keywd{\{}~ s ~\Keywd{\}} \\
    \Typ{Contract}    &~ c && :=\ && \Keywd{contract}~ x~ \Keywd{\{}~ d^*; \F^* ~\Keywd{\}}
  \end{alignat*}
  \caption{The abstract syntax of $\lambda_\lang$.}
  \label{fig:syntax}
\end{figure}
%GW: nested expression with mapping and struct

\iffalse

  \begin{alignat*}{3}
    \Typ{Types}      \qquad & t && ::=
      \Keywd{address} \mid
      \Keywd{uint} \mid
      \Keywd{function}(t, \dots)~\Keywd{returns}~t \mid
      \dots \\
    \Typ{Literals}    \qquad & v && \in
      \mathbb{Z} \mid
      \todo{whatelse} \\
    \Typ{Operators} \qquad & o && ::=
      + \mid
      - \mid
      \times \mid
      \land \mid
      \lor \mid
      \dots \\
    \Typ{Expressions}\qquad & e && ::=
      v \mid
      x \mid
      o(e, \dots) \mid
      \todo{} \\
    \Typ{Statements} \qquad & s && ::=
                                   \Keywd{revert} \mid
                                   s_1; s_2 \mid
                                   x ~\mathsf{:=}~ e \mid
                                   x ~\mathsf{:=}~ f(e, \dots)  \text{\yy{unify assignments?}}\\
                            & && \mid \Keywd{if}~e~\Keywd{then}~s_1~\Keywd{else}~s_2 \mid
                                   \Keywd{while}~e~\Keywd{do}~s
                                   \\
    \Typ{Temporal~Connectives} \qquad & \oplus && ::=
      ~ \Rightarrow ~\mid~ \not\Rightarrow ~\mid~ \leadsto ~\mid~ \not\leadsto \\
    \Typ{Value~Specifications} \qquad & \varsigma_v && ::=
      \{ (x, \dots) ~\vert~ e \} \mid
      \varsigma_v \mapsto \varsigma_v \\
    \Typ{Temporal~Specifications} \qquad & \varsigma_t && ::=
     f(x, \dots)~\Keywd{returns}~ (z_1, \dots) ~\oplus~ g(y, \dots)~\Keywd{returns}~ (z_2, \dots) \land e \\
    \Typ{Specifications} \qquad & \varsigma && ::= \varsigma_v \mid \varsigma_t \\
    \Typ{Function~Definitions} \qquad & \mathcal{F} && ::=
      \# \varsigma^* ~ \Keywd{function}~f(t ~ x, \dots)~\Keywd{returns}~t~\{ ~s~ \}
  \end{alignat*}

\fi
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:
